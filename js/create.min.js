function getVal(){var a=$("#eventTitleT").val(),b=$("#bookDate").val();url="ajax/getVal.php",$("#show").empty(),$.ajax({url:url,type:"POST",data:{eventTitleT:a,bookDate:b},cache:!0,success:function(a){$("#show").append(a)}})}function deleteTicket(a){$.ajax({url:"ajax/insertTickets.php",type:"post",data:{delete:"delete",tId:a},success:function(b){b.indexOf("OK")>=0&&$("#"+a).effect("drop",400)}})}function getDate(a){var b="#ticketLast_date"+a;avail="#lticketLast_date"+a,$(b).datepicker({minDate:0}),$(b).datepicker("option","dateFormat","d M, yy"),$(b).datepicker("show").removeAttr("placeholder"),$(avail).show("fold")}function labelHide(a,b){$("#l"+a).hide(b);var c=a.replace(/\d+/g,"");"ticketName"==c?$("#"+a).attr("placeholder","Enter Ticket Title"):"ticketDescription"==c?$("#"+a).attr("placeholder","Enter Ticket Description"):"ticketLast_date"==c?$("#"+a).attr("placeholder","Tickets Available from"):"ticketPrice"==c?$("#"+a).attr("placeholder","Enter Price"):"ticketMax"==c?$("#"+a).attr("placeholder","Max Tickets allow to book"):"ticketTotal"==c&&$("#"+a).attr("placeholder","Total Tickets")}function insertData(a,b,c){$.ajax({url:"ajax/insertTickets.php",type:"post",data:{update:c,field:b,val:a},success:function(a){}})}function ajaxCall(a,b,c,d){""!=c?$("#"+c).show():"",$.ajax({url:"ajax/eventData.php",type:"post",data:{field:a,data:b,id:d},success:function(a){""!=c?$("#"+c).hide():""}})}function getDivData(a,b,c){b="#"+b,$.trim($(b).html())===divs[b]?$(b).html(""):ajaxCall(a,$.trim($(b).html()),c)}function getInputData(a,b,c){b="#"+b,ajaxCall(a,$(b).val(),c,b)}function change(a,b){$("#"+a).css("color","black").removeAttr("placeholder"),$("#l"+a).show(b)}function blurDiv(a){$("#"+a).css("color","#c4c4c4")}function chkEmpty(a,b,c){"div"===c&&(""===$.trim($(a).html())||$.trim($(a).html())===b?$(a).css("border","1px solid rgba(255, 0, 0, 0.79)"):$(a).css("border","")),"input"===c&&(""===$(a).val()||$(a).val()===b?$(a).css("border","1px solid rgba(255, 0, 0, 0.79)"):$(a).css("border",""))}var num=1;url=document.location.href;var index=url.lastIndexOf("/")+1,filenameWithExtension=url.substr(index),filename=filenameWithExtension.split(".")[0],divs={"#aboutEvent":"Write brief Description about the Event...","#eventTitle":"Add Event Title...","#eventAddress":"Event Address","#eventEmail":"Organiser Email ID","#eventFacebook":"Enter Facebook Link...","#eventTwitter":"Enter Twitter Link..."},inputs={"#eventCategory":"-1","#selectCity1":"-1"};$(document).ready(function(){$("#doit").on("click",function(){i=$("#totalTickets").val(),i++,$.ajax({url:"ajax/insertTickets.php",type:"post",data:{new:"new"},dataType:"JSON",success:function(a){a.verify.indexOf("OK")>=0&&($("#ticketsCol").show("blind").append('<div class="ticket1" id="'+a.tId+'"><i class="fa fa-times-circle delete closebtn" onclick="deleteTicket($(this).closest(\'div\').prop(\'id\'));" aria-hidden="true"></i><div class="ticket-borderTop"> </div><div class="ticket-div-content"><div class="ticket-cont_main"><div class="ticket-eventCatName" style="color: grey"><div class="ticketName"><span id = "lticketName'+i+'">Ticket Title - </span><input type = "text" title = "Enter Ticket Name" name = "" id = "ticketName'+i+'" onkeyup = "insertData(this.value,this.id,'+a.tId+');" onclick = "change(this.id,\'drop\');" onfocus = "change(this.id,\'drop\');" placeholder = "Enter Ticket Name" onblur = "labelHide(this.id,\'drop\');"></div><div class="clear"></div><div class="ticket-tckdesc" ><span id = "lticketDescription'+i+'">Ticket Description - </span><input type = "text" title = "Enter Description for Ticket" name = "" id = "ticketDescription'+i+'" onkeyup = "insertData(this.value,this.id,'+a.tId+');" placeholder= "Enter Ticket description"   onclick = "change(this.id,\'drop\');" onfocus = "change(this.id,\'drop\');"  onblur = "labelHide(this.id,\'drop\');"></div><div  class="ticket-lastdate" ><span id = "lticketLast_date'+i+'" >Available from - </span><input title = "Enter Last date for Tickets" type="text" id="ticketLast_date'+i+'" placeholder="Tickets Available from..." onclick="getDate('+i+');" onfocus="getDate('+i+');" style="" onchange = "insertData(this.value,this.id,'+a.tId+');" placeholder="Tickets Available from" onclick = "change(this.id,\'drop\');" onfocus = "change(this.id,\'drop\');" onblur = "labelHide(this.id,\'drop\');"></div></div><div class="ticket-eventCatValue"><span id = "lticketPrice'+i+'">Ticket Price - </span><input type = "text" title = "Enter Price for Ticket" style = "text-align:center;width: 100%" name = "" id = "ticketPrice'+i+'" onkeyup = "insertData(this.value,this.id,'+a.tId+');" onclick = "change(this.id,\'blind\');" onfocus = "change(this.id,\'blind\');" placeholder = "Enter Price"  onblur = "labelHide(this.id,\'blind\');"></div><div class="ticket-eventCatSelect"><div><span id = "lticketTotal'+i+'">Total Tickets - </span><input type = "text" title = "Enter Total Available Tickets to be Sold" id="ticketTotal'+i+'"  class="tquantity" onkeyup = "insertData(this.value,this.id,'+a.tId+');"  onfocus = "change(this.id,\'blind\');" onclick = "change(this.id,\'blind\');" placeholder = "Total Tickets"  onblur = "labelHide(this.id,\'blind\');"></div><div ><span id = "lticketMax'+i+'">Max Tickets - </span><input type="text" title = "Enter Max Allowed Tickets to be Purchased by Customer at a Time"  class="tquantity" id="ticketMax'+i+'" onkeyup = "insertData(this.value,this.id,'+a.tId+');"  onfocus = "change(this.id,\'blind\');" onclick = "change(this.id,\'blind\');" placeholder = "Max Tickets allow to book"  onblur = "labelHide(this.id,\'blind\');"></div></div></div></div><div class="clear"></div><div class="ticket-borderBottom"></div></div>'),$("#totalTickets").val(i))}})})});var evTime1=""!=$("#evTime1").val()?$("#evTime1").val():"";evTime1=evTime1.replace(/(AM|PM)/g,"");var evTime2=""!=$("#evTime2").val()?$("#evTime2").val():"";evTime2=evTime2.replace(/(AM|PM)/g,""),$("#eventTime1").wickedpicker({now:evTime1}),$("#eventTime2").wickedpicker({now:evTime2}),$(function(){function c(a){var b;try{b=$.datepicker.parseDate("d M, yy",a.value)}catch(a){b=null}return b}var a=$("#eventFrom").datepicker({defaultDate:"+1w",changeMonth:!0,numberOfMonths:2,dateFormat:"d M, yy"}).on("change",function(){b.datepicker("option","minDate",c(this))}),b=$("#eventTo").datepicker({defaultDate:"+1w",changeMonth:!0,numberOfMonths:2,dateFormat:"d M, yy"}).on("change",function(){a.datepicker("option","maxDate",c(this))})}),$("#confirmImage").on("submit",function(a){$("#bannerBtn").hide("blind"),$("#uploadLoader").show("blind"),a.stopPropagation(),a.preventDefault();var b=new FormData(this);$.ajax({url:"ajax/eventData.php",type:"post",data:b,contentType:!1,processData:!1,success:function(a){a.indexOf("OK")>=0?($("#uploadLoader").hide("blind"),$("#bannerBtn").show("blind"),$("#doneBtn").hide()):a.indexOf("NO")>=0&&($("#uploadLoader").hide("blind"),$("#errLaMsg").show("fold"),$("#bannerBtn").show("blind"))}})}),$("#publishBtn").on("click",function(){if(""===$.trim($("#aboutEvent").html())||$.trim($("#aboutEvent").html())===divs["#aboutEvent"]||""===$.trim($("#eventTitle").html())||$.trim($("#eventTitle").html())===divs["#eventTitle"]||$("#eventCategory").val()===-1||""===$("#selectCity1").val()||""===$.trim($("#eventEmail").html())||$.trim($("#eventEmail").html())===divs["#eventEmail"]||""===$.trim($("#eventAddress").html())||$.trim($("#eventAddress").html())===divs["#eventAddress"]||""===$.trim($("#eventFacebook").html())||$.trim($("#eventFacebook").html())===divs["#eventFacebook"]||""===$.trim($("#eventTwitter").html())||$.trim($("#eventTwitter").html())===divs["#eventTwitter"]){console.log("1");for(var a in divs)chkEmpty(a,divs[a],"div");for(var a in inputs)chkEmpty(a,inputs[a],"input");$("#pubMsg").show("blind").html('<span class = "pubSuccess">Please Fill all Required Fields !!!</span>'),window.setTimeout(function(){$("#pubMsg").hide("blind")},5e3)}else{console.log("1");for(var a in divs)chkEmpty(a,divs[a],"div");for(var a in inputs)chkEmpty(a,inputs[a],"Input");$.ajax({url:"ajax/eventData.php",type:"post",data:{field:"status",data:"0",id:""},success:function(a){console.log(a),a.indexOf("OK")>=0?($("#pubMsg").show("blind").html('<span class = "pubSuccess">Your Event is Published !!</span>'),window.setTimeout(function(){$("#pubMsg").hide("blind")},5e3)):a.indexOf("ON")>=0&&($("#pubMsg").show("blind").html('<span class = "pubFailure">Something Went Wrong Please Try Again !!</span>'),window.setTimeout(function(){$("#pubMsg").hide("blind")},5e3))}})}});